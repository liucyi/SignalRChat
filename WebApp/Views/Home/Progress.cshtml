
@{
    Layout = null;
}

<!DOCTYPE html>

 <html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1"  >
    <title>Real-time Progress Bar using SignalR and JQuery UI</title>
    <link type="text/css" href="~/Content/ui.all.css" rel="stylesheet" />
    <link href="~/Content/redmond/jquery-ui-1.10.3.custom.min.css" rel="stylesheet" type="text/css" />


 
    <script src="~/Scripts/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="~/Scripts/ui.core.js"></script>
    <script type="text/javascript" src="~/Scripts/ui.progressbar.js"></script>

   
    <!-- signalr library -->
 
    <script src="~/Scripts/jquery.signalR-2.2.1.min.js"></script>
    <!-- autogenerated signalr hub script -->
 
    <script src="~/signalr/hubs"></script>
    <script type="text/javascript" language="javascript">

        $(document).ready(function () {
          
            // initialize progress bar
            $("#progressbar").progressbar({ value: 0 });

            // initialize the connection to the server
            var progressNotifier = $.connection.progressHub;

            // client-side sendMessage function that will be called from the server-side
            progressNotifier.client.sendMessage = function (message) {
                // update progress
                UpdateProgress(message);
            };

            // establish the connection to the server and start server-side operation
            $.connection.hub.start().done(function () {
           
                // call the method CallLongOperation defined in the Hub
                progressNotifier.server.callLongOperation();
            });

        });

        function UpdateProgress(message) {
            // get result div
            var result = $("#result");
            // set message
            result.html(message);
            // get progress bar
            var value = $("#progressbar").progressbar("option", "value");
            // update progress bar
            $("#progressbar").progressbar("value", value + 1);

        }

    </script>

</head>
<body>
    <form id="form1"  >

        <div style="width: 30%; margin: 0 auto;">
            <div id="result" style="font-family: Tahoma; font-size: 0.9em; color: darkgray; margin-top: 230px; padding-bottom: 5px">
                Initializing and Preparing...
            </div>

            <div id="progressbar" style="width: 300px; height: 15px"></div>
            <br />
        </div>

    </form>



</body>
</html>
